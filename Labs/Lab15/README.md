# Лабораторная работа №15. VPN. GRE. DmVPN

### Задание:

1. Настроить GRE между офисами Москва и С.-Петербург
2. Настроить DMVMN между Москва и Чокурдах, Лабытнанги

Конфигурационные файлы [здесь](config/)

#### 1. Настроить GRE между офисами Москва и С.-Петербург

#### Топология GRE туннелей

![GRE_Tun](GRE_Tun.png)

Создадим виртуальные интерфейсы __tun__ на роутерах R14, R15, R18. Для резервирования сделаем два туннеля R14-R18 (__tun14__) и R15-R18(__tun15__).

| Equip | Port | IP/Mask | tun_src | tun_dst |
|:--- |:--- |:--- |---:|:--- |
| R14 | tun14 | 192.168.0.1/30 | 77.77.77.114 | 178.178.178.118 |
| R18 | tun14 | 192.168.0.2/30 | 178.178.178.118 | 77.77.77.114 |
| R15 | tun15 | 192.168.0.5/30 | 77.77.77.115 | 178.178.178.115 |
| R18 | tun15 | 192.168.0.6/30 | 178.178.178.115 | 77.77.77.115 |


<details>
 <summary>Настройки NAT на R14-R15</summary>

``` bash
###################
# Настройка R14   #
###################

conf t
int tun14
ip addr 192.168.0.1 255.255.255.252
ip mtu 1400
ip tcp adjust-mss 1360
tunnel source 77.77.77.114
tunnel destination 178.178.178.118

###################
# Настройка R18   #
###################

conf t
int tun14
ip addr 192.168.0.2 255.255.255.252
ip mtu 1400
ip tcp adjust-mss 1360
tunnel source 178.178.178.118
tunnel destination 77.77.77.114

int tun15
ip addr 192.168.0.6 255.255.255.252
ip mtu 1400
ip tcp adjust-mss 1360
tunnel source 178.178.178.115
tunnel destination 77.77.77.115

###################
# Настройка R15   #
###################

conf t
int tun15
ip addr 192.168.0.5 255.255.255.252
ip mtu 1400
ip tcp adjust-mss 1360
tunnel source 77.77.77.115
tunnel destination 178.178.178.115

```
</details>
